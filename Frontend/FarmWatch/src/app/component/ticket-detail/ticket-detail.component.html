<mat-sidenav-container class="sidenav-container" id="top">
    <mat-sidenav mode="side" opened class="sidenav-left" [fixedInViewport]="true" [fixedTopGap]="56" [fixedBottomGap]="0">
        <h3 class="card-title">Ticket</h3>
    </mat-sidenav>
    <mat-sidenav-content class="sidenav-content">
        <div class="container d-flex flex-column">
            <div class="row">
                <div class="col">
                    <h3>Ticket Details</h3>
                    <div class="ticket-container mx-auto">
                        <table class="table">
                            <tr>
                                <th>Summary</th>
                                <td colspan="3">{{ticket?.summary}}</td>
                            </tr>
                            <tr>
                                <th>Ticket ID</th>
                                <td>{{ticket?.id}}</td>
                                <th>Report Date</th>
                                <td>{{ticket?.reportDateTime | date: 'dd/MM/yyyy hh:mm'}}</td>
                            </tr>
                            <tr>
                                <th>Status</th>
                                <td>{{ticket?.status}}</td>
                                <th>Reported By User</th>
                                <td>{{ticket?.reportedByUser?.username}}</td>
                            </tr>
                            <tr>
                                <th>Animal name</th>
                                <td>{{ticket?.animal?.name || "Not specified"}}</td>
                                <th>Assigned To User</th>
                                <td>{{ticket?.assignedToUser?.username || "Not assigned"}}</td>
                            </tr>
                            <tr>
                                <th>Description</th>
                                <td colspan="3">{{ticket?.description}}</td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <h3>Ticket Messages</h3>
                    <div class="ticket-message-container mx-auto">
                        <div>
                            <form name="form" #f="ngForm" (ngSubmit)="onSubmit()">
                                <div class="form-group">
                                    <label for="newTicketMessage">New Ticket Message</label>
                                    <textarea class="form-control" id="newTicketMessage" rows="3" 
                                    name="message"
                                    [(ngModel)]="newTicketMessageForm.message"
                                    required
                                    message
                                    #message="ngModel"></textarea>
                                </div>
                                <div class="text-right">
                                    <button type="submit" class="btn btn-primary">Submit</button> 
                                </div>
                            </form>
                        </div>
                        <ng-container *ngFor="let ticketMessage of ticketMessages">
                            <div class="fw-comment-container d-flex">
                                <div class="fw-comment-userinfo">
                                    <table>
                                        <tr>
                                            <td class="username">{{ticketMessage.sendByUser.username}}</td>
                                        </tr>
                                        <tr>
                                            <td>{{ticketMessage.sendByUser.role}}</td>
                                        </tr>
                                    </table>
                                </div>
                                <div class="comment">
                                    <span class="comment-meta">{{ticketMessage.messageLocalDateTime | date: "dd-MM-yyyy HH:mm"}}</span>
                                    <div class="comment-body">
                                        <p class="comment-text">{{ticketMessage.message}}</p>
                                        <div class="comment-footer">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </ng-container>
                    </div>
                </div>
            </div>
        </div>
    </mat-sidenav-content> 
    <mat-sidenav mode="side" opened position="end" class="sidenav-right" [fixedInViewport]="true" [fixedTopGap]="56" [fixedBottomGap]="0">
        <button class="btn btn-warning tooltips btn-block text-light " routerLink="/ticket/update/{{id}}">Edit</button>
    </mat-sidenav>
</mat-sidenav-container>

